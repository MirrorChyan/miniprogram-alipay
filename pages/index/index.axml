
<view class="container">

    <view class="header-section">
        <view class="avatar-wrapper">
            <image class="avatar" src="https://mirrorchyan.com/api/misc/static/mirrorc/avatar-256.png"
                   mode="aspectFill"></image>
        </view>
        <view class="title-wrapper">
            <text class="main-title">Mirroré…±</text>
        </view>
    </view>


    <view class="cards-section">

        <view class="function-card" onTap="onFetchCdkList">
            <view class="card-icon-wrapper">
                <view class="card-icon">
                    <image src="/images/cdk.svg"></image>
                </view>
            </view>
            <view class="card-content">
                <text class="card-title">å¿«æ·æŸ¥è¯¢</text>
                <text class="card-desc">ä¸€é”®æŸ¥è¯¢æ”¯ä»˜å®çš„CDK</text>
            </view>
            <view class="card-arrow">â”</view>
        </view>


        <view class="function-card" onTap="onQueryCDK">
            <view class="card-icon-wrapper">
                <view class="card-icon">
                    <image src="/images/order.svg"></image>
                </view>
            </view>
            <view class="card-content">
                <text class="card-title">æ›´å¤šæŸ¥è¯¢</text>
                <text class="card-desc">æ‰‹åŠ¨æŸ¥è¯¢æ›´å¤šå¹³å°çš„CDK</text>
            </view>
            <view class="card-arrow">â”</view>
        </view>


        <view class="function-card" onTap="onFeedback">
            <view class="card-icon-wrapper">
                <view class="card-icon">
                    <image src="/images/feedback.svg"></image>
                </view>
            </view>
            <view class="card-content">
                <text class="card-title">äº¤æµåé¦ˆ</text>
                <text class="card-desc">åŠ å…¥QQç¾¤è·å–å¸®åŠ©</text>
            </view>
            <view class="card-arrow">â”</view>
        </view>
    </view>


    <!-- è®¢å•å¼¹çª— -->
    <view class="popup-overlay order-popup {{showOrderList ? 'show' : 'hide'}}" onTap="closeOrderList">
        <view class="modern-order-popup" onTap="preventDefault">

            <view class="order-popup-header">
                <view class="header-icon-area">
                    <text class="header-icon"> </text>
                </view>
                <text class="order-popup-title">æˆ‘çš„CDK</text>
                <view class="order-close-btn" onTap="closeOrderList">
                    <text class="close-icon">âœ•</text>
                </view>
            </view>


            <view class="order-popup-body">
                <view a:if="{{orderList.length === 0}}" class="empty-state">
                    <view class="empty-icon">
                        <text class="empty-icon-text">ğŸ“¦</text>
                    </view>
                    <text class="empty-title">æš‚æ— è®¢å•</text>
                    <text class="empty-desc">æœªæŸ¥è¯¢åˆ°CDKï¼Œå¯å°è¯•æ‰‹åŠ¨è¾“å…¥è®¢å•å·æŸ¥è¯¢~</text>
                </view>
                <scroll-view a:else class="order-list-scroll" scroll-y="{{true}}"
                             enable-flex="{{true}}" scroll-with-animation="{{true}}">
                    <view class="order-list">
                        <view a:for="{{orderList}}" a:key="cdk"
                              class="order-card {{item.status === 'expired' ? 'order-card-expired' : ''}}">

                            <view class="order-card-header">
                                <view class="cdk-info">
                                    <view class="cdk-display-row {{item.status ==='valid'?'':'cdk-display-row-expired'}}">
                                        <text class="cdk-code {{item.status ==='valid'?'':'cdk-code-expired'}}">{{item.cdk}}</text>
                                        <view class="cdk-status-badge {{item.status ==='valid'?'status-valid':'status-expired'}}">
                                            {{item.status === 'valid' ? 'æœ‰æ•ˆ' : (item.status === 'transferred' ? 'å·²è¢«è½¬ç§»' : 'å·²è¿‡æœŸ')}}
                                        </view>
                                    </view>
                                    <view class="cdk-display-row {{item.status!=='expired'?'':'cdk-display-row-expired'}}">
                                        <view class="{{item.status === 'valid' ? '' : 'cdk-time-expired'}}">
                                            {{ (item.status === 'transferred' ? 'è½¬ç§»æ—¶é—´ï¼š' : 'è¿‡æœŸæ—¶é—´ï¼š') + item.expiredFormatStr }}
                                        </view>
                                    </view>
                                    <button
                                            type="{{item.status === 'valid' ? 'primary' : 'default'}}"
                                            size="mini"
                                            data-cdk="{{item.cdk}}"
                                            onTap="copyCDK"
                                            class="copy-btn"
                                    >
                                        å¤åˆ¶
                                    </button>
                                </view>
                            </view>

                        </view>
                    </view>
                </scroll-view>
            </view>
        </view>
    </view>

    <!-- åé¦ˆå¼¹çª— -->
    <view class="popup-overlay feedback-popup {{showFeedback ? 'show' : 'hide'}}" onTap="closeFeedback">
        <view class="modern-feedback-popup" onTap="preventDefault">

            <view class="feedback-popup-header">
                <view class="feedback-icon-area">
                    <text class="feedback-icon">ğŸ’¬</text>
                </view>
                <text class="feedback-popup-title">é—®é¢˜åé¦ˆ</text>
                <view class="feedback-close-btn" onTap="closeFeedback">
                    <text class="close-icon">âœ•</text>
                </view>
            </view>


            <view class="feedback-popup-body">
                <view class="feedback-intro">
                    <view class="intro-icon">
                        <text class="intro-icon-text">ğŸ› ï¸</text>
                    </view>
                    <text class="intro-desc">å¦‚é‡é—®é¢˜ï¼Œæ¬¢è¿åŠ å…¥QQç¾¤åé¦ˆ</text>
                </view>

                <view class="qq-info-card">
                    <view class="qq-header">
                        <text class="qq-title">QQå”®åç¾¤</text>
                    </view>
                    <view class="qq-divider"></view>
                    <view class="qq-content">
                        <view class="qq-number-display">
                            <text class="qq-number-text">{{qqGroupNumber}}</text>
                        </view>
                        <button
                                type="primary"
                                onTap="copyQQ"
                                class="copy-qq-btn"
                        >
                             å¤åˆ¶
                        </button>
                    </view>
                </view>
            </view>
        </view>
    </view>
</view>
